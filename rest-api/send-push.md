---
id: send-push
title: ارسال‌ پوش
layout: rest-api
permalink: rest-api/send-push.html
prev: add-tag.html

---

### ارسال پوش به کاربران

در این نمونه می‌توانیم برای یک **کاربر بخصوص** یا **همه کاربران یک کانال** (خصوصی و عمومی)  پیامی را از طریق API ارسال کنیم.

> `نکته :` دقت داشته باشید که این عمل با متد `POST` انجام می‌شود.

#### درخواست

> `نکته :` از پارامتر‌هایی که در این عمل استفاده می‌شوند، `user` و `content` (شناسه کاربر و محتوای پیام) **الزامی** هستند و بدون آن‌ها درخواست شما صورت نمی‌گیرد. (برای پیام عمومی در قسمت `user` به جای شناسه کاربر، استریسک(*) را وارد نمایید.)

بسته به نوع پیامی که می‌خواهید ارسال کنید می‌توانید از **انواع پارامترها** استفاده کنید. به عنوان مثال می‌خواهیم یک پیامی برای هشدار یک کاربر با `userId` (شناسه کاربری) **Test** از تاخیر پرواز هواپیمای خود ارسال کنیم. متن این پیام را هم می‌خواهیم برای **اعلان** آن قرار دهیم.

```bash
curl -X POST \
"https://sandbox.push.adpdigital.com/api/push/toUsers?access_token=<ACCESS_TOKEN>" \
-H "accept: application/json" -H "Content-Type: application/json" \
-d "{ \"user\": \"Test\", \"content\": \"پرواز شما دچار نیم ساعت تاخیر شده است.\", \"useAsAlert\": true}"
```

#### پاسخ

همانطور که می‌بینید درخواست شما با موفقیت انجام شد و پیام هشدار به یک (count: 1) دستگاه کاربر **Test** ارسال شد.

```javascript
{
  "count": 1
}
```

حالا می‌توانید در **پنل بخش پیام‌ها قسمت پیام‌ها** جزئیات ارسال و تحویل پیام خود را مشاهده کنید.


![عکس مربوطه](http://uupload.ir/files/gxlv_byuser.png)

> `نکته :` برای تست کردن این عمل می‌توانید [به این لینک](https://api.doc.chabokpush.com/#/push/push_toUsers) مراجعه فرمایید.


### ارسال پوش به دسته‌ای از کاربران (Segmented Push)

در این قسمت به جای ارسال پیام به **یک کاربر** می‌خواهیم به **دسته‌ای از کاربران** ارسال کنیم.

> `نکته :` دقت داشته باشید که این عمل با متد `POST` انجام می‌شود.

#### درخواست

اکنون می‌خواهیم کمپینی را بسازیم و دسته‌ای از کاربران را براساس ویژگی‌های مورد نظر‌ (**سگمنت**) مخاطب قرار دهیم. به عنوان مثال این کمپین به مناسبت راه‌افتادن اپلیکیشن موبایل می‌خواهد کد تخفیفی را مخصوص کسانی که اپلیکیشن شما را در موبایل خود دارند، ارسال کند.

> `نکته :` از پارامتر‌هایی که در این عمل استفاده می‌شوند، `target` و `content` (ویژگی‌های دسته و محتوای پیام) **الزامی** هستند و بدون آن‌ها درخواست شما صورت نمی‌گیرد.

> `نکته :` در قسمت سگمنت، فیلترهای پیش‌فرض چابک ‍‍‍‍‍‍‍‍‍‍‍‍‍`installDate` (اولین بازدید یا نصب) ، `launchTime` (آخرین بازدید) ،‌ `launchCount` (تعداد بازدید) ، `clientVersion` (نسخه برنامه) ،‌ `osVersion` (نسخه سیستم‌عامل) ، `deviceType` (نوع دستگاه) ، `tags` (تگ‌ها) ، `nearBy` (موقعیت مکانی) می‌باشند. درصورت اضافه کردن سگمنت از سوی خودتان هم فقط کافی‌‌ست نام آن را وارد نمایید.


```bash
curl -X POST \
"https://sandbox.push.adpdigital.com/api/push/byQuery?access_token=<ACCESS_TOKEN>" \
-H "accept: application/json" -H "Content-Type: application/json" \
-d "{\t\"target\": {\t\t\"deviceType\": {\"inq\": [\"android\", \"ios\"]}\t},\t\"content\": \"سلام به اپلیکیشن ما خوش‌آمدید. برای خرید اولتان از اپلیکیشن می‌توانید از کد تخفیف 10٪ استفاده کنید. کد تخفیف: NewApp10 \",\t\"useAsAlert\": true}"
```

#### پاسخ

درخواست شما با موفقیت انجام شد و کمپین شما به ۴۴ دستگاه  (count : 44) ارسال شد.

```javascript
{
  "count": 44
}
```
پس از ارسال موفقیت آمیز می‌توانید در **پنل بخش کمپین‌ها** آمار ارسال و تحویلتان را مشاهده کنید.

![عکس مربوطه](http://uupload.ir/files/49ie_byquery.png)


> `نکته :` برای تست کردن این عمل می‌توانید [به این لینک](https://api.doc.chabokpush.com/#/push/push_byQuery) مراجعه فرمایید.

